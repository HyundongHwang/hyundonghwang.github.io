---
layout: post
title: 260105 책리뷰 러닝 랭체인
comments: true
tags:
---

# p43 환경구축

```bash
pip install langchain langchain-claude langchain-community
pip install langchain-text-spliiter
pip install langchain-postgres

export CLAUDE_API_KEY=xxx
```

# p44 기본 LLM 호출

```python
model = ClaudeAI(model="...")
model.invoke("하늘이")
```

```bash
푸릅니다.
```

# p45 LLM 옵션
- temperature
  - 출력생성에 사용하는 샘플링 알고리즘
  - 낮은값 : 0.1
    - 예측가능한 결과
  - 높은값 : 0.9
    - 창의적인 결과
- max_tokens
  - 출력크기와 비용제한
  - LLM이 자연스러운 마무리에 도달하기전 출력을 중단
- 역할
  - system
    - 사용자 질문에 답변하는 지시사항
  - user
    - 사용자의 쿼리
    - 사용자의 컨텐츠
  - assistant
    - 채팅모델이 생성한 컨텐츠

# p46 채팅모델 호출

```python
model = ClaudeAI("sonet...")
prompt = [HumanMsg("프랑스의 수도는 어디인가?")]
model.invoke(prompt)
```

```bash
AIMsg(content="프랑스의 수도는 파리입니다.")
```

- 채팅메시지 인터페이스
  - HumanMsg
    - 사용자 역할
    - 인간관점의 메시지
  - AIMsg
    - 어시스턴트 역할
    - AI의 관점 메시지
  - SystemMsg
    - 시스템 역할
    - AI가 준수할 지침 설정
  - ChatMsg
    - 임의의 역할

# p47 시스템 메시지 적용, 채팅모델 호출

```python
model = ChatClaudeAI()
sys_msg = SysMsg("역할 : 문장끝에 느낌표 3개를 붙여서 대답해 주세요.")
human_msg = HumanMsg("프랑스의 수도는 어디인가요?")
model.invoke([sys_msg, human_msg])
```

```bash
AIMsg("파리 입니다!!!")
```